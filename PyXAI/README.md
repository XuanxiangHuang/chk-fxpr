# PyXAI

Explaining Random Forest and Boosted Trees classifiers with PyXAI,  
computing AXps and CXps for RF classifiers, and computing CXps for BT classifiers.

### Installation

Run the following:

`cd pyxai-main-May06/pyxai`  
`docker build -t test_pyxai:dev .`  

to install PyXAI using Docker.

The `requirements.txt` file is included in the `pyxai` folder.  
The Dockerfile is available at `pyxai-main-May06/pyxai/Dockerfile`.

```dockerfile
# 0. Base image
FROM ubuntu:22.04

# 1. System deps + build tools
RUN apt update \
 && apt install -y \
      python3 python3-pip python3-dev build-essential g++ \
      ffmpeg libsm6 libxext6 qt6-base-dev \
      libxcb-cursor0 libxcb-xinerama0 wget \
 && rm -rf /var/lib/apt/lists/*

# 2. Python tooling (no Jupyter)
RUN pip3 install --upgrade pip \
 && pip3 install \
      ipython \
      widgetsnbextension \
      ipywidgets \
      jupyter-lsp

# 3. Copy everything *before* the editable install
WORKDIR /data
# Copy your exact dependency pins
COPY requirements.txt setup.py /data/
# Copy your entire source (pyxai/, tests/, etc.)
COPY . /data/

# 4. Install pinned dependencies
RUN pip3 install --no-cache-dir -r requirements.txt

# 5. Install your local package in editable mode
RUN pip3 install --no-cache-dir --editable /data

# 6. Make /data a volume for live edits
ENV PYTHONPATH=/data
VOLUME ["/data"]

# 7. Default to your test folder
WORKDIR /data/pyxai/tests
CMD ["bash"]
```

### Usage

Run `cd pyxai-main-May06/pyxai/tests` to access all materials for reproducing the experimental results.

The `toy_bts` and `toy_rfs` folders contain the toy examples referenced in the paper.
The `exported_rfs` folder contains the Random Forest classifiers (50 trees), and the `exported_bts` folder contains the Boosted Trees classifiers (50 trees).
The `results` folder contains the log files generated by PyXAI for both RF and BT classifiers.
The `extract_insts` folder contains the test instances.

To reproduce the experiments, build the Docker image (if you have not done so already) and run the appropriate script from the folder (`pyxai-main-May06`).

Run the experiment for Boosted Trees (BT):
```
docker run --rm -it \
  -v "$(pwd)":/data \
  -w /data/pyxai/tests \
  -e PYTHONPATH=/data \
  test_pyxai:dev \
  python3 compute_xp_bts.py
```
Run the experiment for Random Forests (RF):

```
docker run --rm -it \
  -v "$(pwd)":/data \
  -w /data/pyxai/tests \
  -e PYTHONPATH=/data \
  test_pyxai:dev \
  python3 compute_xp_rfs.py
```

`test_toy_bts.py`, `test_toy_rfs.py`, `compute_xp_bts.py`, and `compute_xp_rfs.py` are the python scripts used to reproduce the experiments reported in the paper.
